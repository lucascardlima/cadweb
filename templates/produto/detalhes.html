{% extends 'base.html' %}

{% block titulo%} Detalhes do Produto {% endblock %}

{% block cards %}

{% endblock %}

{% block titulo_page %} Detalhes do Produto: {% endblock %}

{% block conteudo %} 
<form>
    {% csrf_token %}
    {{ form.as_p }}
    <div class="form-group">
        <label for="id">ID:</label>
        <input type="text" class="form-control" id="id" value="{{ produto.id }}" readonly>
    </div>

    <div class="form-group">
        <label for="nome">Nome:</label>
        <input type="text" class="form-control" id="nome" value="{{ produto.nome }}" readonly>
    </div>

    <div class="form-group">
        <label for="ordem">Preço(R$):</label>
        <input type="text" class="form-control" id="ordem" value="{{ produto.preco }}" readonly>
    </div>

    <div class="form-group">
        <label for="ordem">Categoria:</label>
        <input type="text" class="form-control" id="ordem" value="{{ produto.categoria }}" readonly>
    </div>

    <div class="form-group">
        <label for="imagem">Imagem:</label>
        <canvas class="canvas" id="imageCanvas" width="200" height="200"></canvas>
    </div>
   

    <div class="mt-3">
        <a href="{% url 'produto' %}" class="btn btn-secondary">Voltar</a>
    </div>
</form>
{% endblock %}


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const canvas = document.getElementById("imageCanvas");
        const ctx = canvas.getContext("2d");

        // Imagem base64 enviada pelo Django
        const base64Image = "{{ produto.imagem }}"; // Certifique-se de passar a string base64 pelo contexto

        if (base64Image) {
            const img = new Image();
            img.onload = function () {
                // Desenha a imagem no canvas
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            };
            img.onerror = function () {
                console.error("Erro ao carregar a imagem.");
            };
            img.src = "data:image/jpeg;base64," + base64Image; // Adicione o prefixo base64
        } else {
            console.error("Imagem base64 não disponível.");
        }
    });
</script>

